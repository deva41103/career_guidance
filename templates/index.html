<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>CareerLens ‚Äî Career Guidance</title>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg:      #f5f2ee;
    --white:   #ffffff;
    --ink:     #1c1c1c;
    --ink2:    #4a4a4a;
    --ink3:    #888;
    --border:  #e0dbd4;
    --accent:  #2d5be3;
    --green:   #1a7a4a;
    --red:     #c0392b;
    --yellow:  #b07d1a;
    --purple:  #6237a0;
  }

  body {
    background: var(--bg);
    color: var(--ink);
    font-family: 'DM Sans', sans-serif;
    font-size: 15px;
    line-height: 1.6;
  }

  nav {
    background: var(--white);
    border-bottom: 1px solid var(--border);
    padding: 0 40px;
    height: 58px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    z-index: 50;
  }
  .logo { font-family: 'Instrument Serif', serif; font-size: 22px; color: var(--ink); }
  .logo span { color: var(--accent); }
  .nav-label { font-size: 12px; color: var(--ink3); }

  .hero {
    max-width: 680px;
    margin: 0 auto;
    padding: 72px 24px 56px;
    text-align: center;
  }
  .hero-badge {
    display: inline-block;
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 4px 12px;
    font-size: 12px;
    color: var(--ink3);
    letter-spacing: 0.4px;
    margin-bottom: 28px;
  }
  .hero h1 {
    font-family: 'Instrument Serif', serif;
    font-size: clamp(36px, 6vw, 56px);
    font-weight: 400;
    line-height: 1.12;
    letter-spacing: -1px;
    margin-bottom: 18px;
  }
  .hero h1 em { font-style: italic; color: var(--accent); }
  .hero p {
    font-size: 16px;
    color: var(--ink2);
    font-weight: 300;
    max-width: 460px;
    margin: 0 auto 36px;
    line-height: 1.7;
  }
  .cta {
    background: var(--ink);
    color: var(--white);
    border: none;
    padding: 13px 28px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    font-family: 'DM Sans', sans-serif;
    transition: background 0.15s;
  }
  .cta:hover { background: #333; }

  .divider { border: none; border-top: 1px solid var(--border); }

  .main {
    max-width: 680px;
    margin: 0 auto;
    padding: 48px 24px 100px;
  }

  .steps {
    display: flex;
    border: 1px solid var(--border);
    border-radius: 8px;
    overflow: hidden;
    background: var(--white);
    margin-bottom: 32px;
  }
  .step-tab {
    flex: 1;
    padding: 11px 6px;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    color: var(--ink3);
    border-right: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: all 0.2s;
  }
  .step-tab:last-child { border-right: none; }
  .step-tab.active { background: var(--ink); color: var(--white); }
  .step-tab.done   { color: var(--green); background: #f0faf4; }
  .sn {
    width: 18px; height: 18px;
    border-radius: 50%;
    background: currentColor;
    display: flex; align-items: center; justify-content: center;
    font-size: 10px; flex-shrink: 0;
  }
  .step-tab .sn { color: transparent; border: 1.5px solid currentColor; }
  .step-tab.active .sn { background: white; color: var(--ink); border-color: white; }
  .step-tab.done .sn   { background: var(--green); color: white; border-color: var(--green); }

  .card {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 32px;
    display: none;
  }
  .card.active { display: block; }
  .ch { margin-bottom: 24px; padding-bottom: 20px; border-bottom: 1px solid var(--border); }
  .ch h2 { font-family: 'Instrument Serif', serif; font-size: 26px; font-weight: 400; letter-spacing: -0.4px; margin-bottom: 4px; }
  .ch p  { font-size: 13px; color: var(--ink3); }

  .upload-zone {
    border: 2px dashed var(--border);
    border-radius: 8px;
    padding: 44px 20px;
    text-align: center;
    cursor: pointer;
    position: relative;
    background: var(--bg);
    transition: border-color 0.2s, background 0.2s;
  }
  .upload-zone:hover, .upload-zone.over { border-color: var(--accent); background: #f0f4ff; }
  .upload-zone input[type="file"] { position: absolute; inset: 0; opacity: 0; cursor: pointer; width: 100%; height: 100%; }
  .u-icon { width: 44px; height: 44px; background: var(--white); border: 1px solid var(--border); border-radius: 8px; display: flex; align-items: center; justify-content: center; margin: 0 auto 14px; font-size: 20px; }
  .upload-zone h3 { font-size: 15px; font-weight: 500; margin-bottom: 4px; }
  .upload-zone p  { font-size: 13px; color: var(--ink3); }

  .file-ok {
    display: none; align-items: center; gap: 12px;
    margin-top: 14px; background: #f0faf4;
    border: 1px solid #b2ddc4; border-radius: 7px; padding: 12px 16px;
  }
  .file-ok.show { display: flex; }
  .file-ok-name { font-size: 14px; font-weight: 500; color: var(--green); }
  .file-ok-size { font-size: 12px; color: var(--ink3); }

  .field { margin-bottom: 18px; }
  .field label { display: block; font-size: 13px; font-weight: 500; color: var(--ink2); margin-bottom: 6px; }
  .field input, .field textarea, .field select {
    width: 100%; background: var(--white); border: 1px solid var(--border);
    border-radius: 7px; padding: 10px 14px;
    font-family: 'DM Sans', sans-serif; font-size: 14px; color: var(--ink);
    outline: none; transition: border-color 0.15s, box-shadow 0.15s; appearance: none;
  }
  .field input:focus, .field textarea:focus, .field select:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(45,91,227,0.1);
  }
  .field textarea { resize: vertical; min-height: 80px; line-height: 1.6; }
  .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
  @media(max-width:520px) { .two-col { grid-template-columns: 1fr; } }

  .pills { display: flex; flex-wrap: wrap; gap: 8px; }
  .pill {
    padding: 7px 16px; border: 1px solid var(--border); border-radius: 100px;
    background: var(--white); font-size: 13px; color: var(--ink2);
    cursor: pointer; transition: all 0.15s; font-family: 'DM Sans', sans-serif;
  }
  .pill:hover { border-color: var(--ink2); color: var(--ink); }
  .pill.on { background: var(--ink); border-color: var(--ink); color: var(--white); }

  .btn-row {
    display: flex; justify-content: flex-end; gap: 10px;
    margin-top: 24px; padding-top: 20px; border-top: 1px solid var(--border);
  }
  .btn-back {
    background: transparent; border: 1px solid var(--border); border-radius: 6px;
    padding: 10px 22px; font-size: 14px; font-weight: 500; color: var(--ink2);
    cursor: pointer; font-family: 'DM Sans', sans-serif; transition: all 0.15s;
  }
  .btn-back:hover { border-color: var(--ink2); color: var(--ink); }
  .btn-next {
    background: var(--ink); border: none; border-radius: 6px;
    padding: 10px 26px; font-size: 14px; font-weight: 500; color: var(--white);
    cursor: pointer; font-family: 'DM Sans', sans-serif; transition: background 0.15s;
  }
  .btn-next:hover { background: #333; }
  .btn-submit {
    background: var(--accent); border: none; border-radius: 6px;
    padding: 10px 28px; font-size: 14px; font-weight: 500; color: var(--white);
    cursor: pointer; font-family: 'DM Sans', sans-serif; transition: background 0.15s;
  }
  .btn-submit:hover { background: #2449c0; }

  .alert {
    background: #fef3f2; border: 1px solid #f5c6c2; border-radius: 7px;
    padding: 11px 16px; font-size: 13px; color: var(--red);
    margin-bottom: 14px; display: none;
  }
  .alert.show { display: block; }

  .loader {
    display: none; position: fixed; inset: 0;
    background: rgba(245,242,238,0.93); z-index: 200;
    align-items: center; justify-content: center;
    flex-direction: column; gap: 18px;
  }
  .loader.show { display: flex; }
  .loader-ring {
    width: 38px; height: 38px;
    border: 3px solid var(--border);
    border-top-color: var(--accent);
    border-radius: 50%;
    animation: spin 0.75s linear infinite;
  }
  .loader-msg { font-size: 14px; color: var(--ink2); }
  .loader-steps { display: flex; flex-direction: column; align-items: center; gap: 5px; }
  .loader-step { font-size: 12px; color: var(--ink3); opacity: 0; animation: fi 0.4s ease forwards; }
  @keyframes spin { to { transform: rotate(360deg); } }
  @keyframes fi   { to { opacity: 1; } }

  /* ‚îÄ‚îÄ RESULTS ‚îÄ‚îÄ */
  #results { display: none; }
  #results.show { display: block; }
  .rw { max-width: 680px; margin: 0 auto; padding: 48px 24px 100px; }

  .r-top { margin-bottom: 32px; }
  .r-top .rl { font-size: 12px; color: var(--ink3); letter-spacing: 0.5px; text-transform: uppercase; margin-bottom: 8px; }
  .r-top h2 { font-family: 'Instrument Serif', serif; font-size: clamp(28px, 5vw, 42px); font-weight: 400; letter-spacing: -0.8px; line-height: 1.1; }
  .r-top h2 em { font-style: italic; color: var(--accent); }

  .primary-box {
    background: var(--white); border: 1px solid var(--border); border-radius: 10px;
    padding: 28px 32px; margin-bottom: 14px;
  }
  .pl { font-size: 11px; color: var(--ink3); letter-spacing: 0.8px; text-transform: uppercase; margin-bottom: 6px; }
  .pn { font-family: 'Instrument Serif', serif; font-size: clamp(24px, 4vw, 36px); font-weight: 400; letter-spacing: -0.5px; margin-bottom: 14px; }
  .conf-row { display: flex; align-items: center; gap: 10px; }
  .conf-bar { width: 150px; height: 5px; background: var(--border); border-radius: 3px; overflow: hidden; }
  .conf-fill { height: 100%; background: var(--accent); border-radius: 3px; width: 0; transition: width 1s ease; }
  .conf-pct { font-size: 14px; font-weight: 600; color: var(--accent); }

  .summary-box {
    background: #f0f4ff; border-left: 3px solid var(--accent);
    border-radius: 0 7px 7px 0; padding: 16px 20px;
    font-size: 14px; color: var(--ink2); line-height: 1.7;
    margin-bottom: 14px; font-weight: 300;
  }

  .sl { font-size: 12px; font-weight: 600; color: var(--ink3); letter-spacing: 0.6px; text-transform: uppercase; margin: 24px 0 10px; }

  .alt-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
  @media(max-width:460px) { .alt-row { grid-template-columns: 1fr; } }
  .alt-card {
    background: var(--white); border: 1px solid var(--border); border-radius: 8px;
    padding: 14px 18px; display: flex; justify-content: space-between; align-items: center;
  }
  .alt-name { font-size: 14px; font-weight: 500; }
  .alt-pct  { font-size: 13px; color: var(--ink3); }

  .skill-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
  @media(max-width:460px) { .skill-grid { grid-template-columns: 1fr; } }
  .skill-box { background: var(--white); border: 1px solid var(--border); border-radius: 8px; padding: 18px; }
  .sb-title {
    font-size: 11px; font-weight: 600; color: var(--ink3);
    text-transform: uppercase; letter-spacing: 0.5px;
    margin-bottom: 12px; display: flex; align-items: center; gap: 7px;
  }
  .dot { width: 7px; height: 7px; border-radius: 50%; display: inline-block; flex-shrink: 0; }
  .dg { background: var(--green); }
  .dr { background: var(--red); }
  .dp { background: var(--purple); }
  .dy { background: var(--yellow); }

  .tl { display: flex; flex-wrap: wrap; gap: 6px; }
  .tag { display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500; border: 1px solid transparent; }
  .tg { background: #edf7f2; color: var(--green);  border-color: #c2e5d3; }
  .tr { background: #fdf0ef; color: var(--red);    border-color: #f2c4bf; }
  .tp { background: #f4f0fa; color: var(--purple); border-color: #d4c4ec; }
  .ty { background: #fdf7ec; color: var(--yellow); border-color: #e8d5a3; }
  .te { font-size: 13px; color: var(--ink3); font-style: italic; }

  .courses-box { background: var(--white); border: 1px solid var(--border); border-radius: 8px; overflow: hidden; }
  .course-row {
    display: flex; align-items: center; gap: 14px;
    padding: 15px 20px; border-bottom: 1px solid var(--border); transition: background 0.15s;
  }
  .course-row:last-child { border-bottom: none; }
  .course-row:hover { background: var(--bg); }
  .cn { width: 26px; height: 26px; background: var(--bg); border: 1px solid var(--border); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; color: var(--ink3); flex-shrink: 0; }
  .ci { flex: 1; min-width: 0; }
  .ci-pl { font-size: 11px; font-weight: 600; color: var(--accent); letter-spacing: 0.4px; text-transform: uppercase; margin-bottom: 2px; }
  .ci-name { font-size: 14px; font-weight: 500; color: var(--ink); }
  .ci-for  { font-size: 12px; color: var(--ink3); margin-top: 2px; }
  .cl { color: var(--ink3); text-decoration: none; font-size: 16px; flex-shrink: 0; transition: color 0.15s; }
  .cl:hover { color: var(--accent); }

  .profile-box {
    background: var(--white); border: 1px solid var(--border); border-radius: 8px;
    padding: 20px; display: grid; grid-template-columns: repeat(auto-fill,minmax(130px,1fr)); gap: 14px;
  }
  .pi-l { font-size: 11px; color: var(--ink3); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px; }
  .pi-v { font-size: 14px; font-weight: 500; }

  .ds-box { background: var(--white); border: 1px solid var(--border); border-radius: 8px; padding: 18px; }

  .restart {
    width: 100%; margin-top: 24px; background: transparent;
    border: 1px solid var(--border); border-radius: 7px; padding: 12px;
    font-size: 14px; color: var(--ink3); cursor: pointer;
    font-family: 'DM Sans', sans-serif; transition: all 0.15s;
  }
  .restart:hover { border-color: var(--ink2); color: var(--ink); }
</style>
</head>
<body>

<nav>
  <div class="logo">Career<span>Lens</span></div>
  <div class="nav-label">ML Career Guidance ¬∑ Demo</div>
</nav>

<section class="hero">
  <div class="hero-badge">Machine Learning ¬∑ Resume Analysis</div>
  <h1>Find your <em>best-fit</em><br/>tech career</h1>
  <p>Upload your resume, answer a few questions, and our ML model will map your skills to the right career paths ‚Äî with a full skill gap breakdown.</p>
  <button class="cta" onclick="document.getElementById('fs').scrollIntoView({behavior:'smooth'})">Get started ‚Üí</button>
</section>

<hr class="divider"/>

<div class="main" id="fs">
  <div class="steps">
    <div class="step-tab active" id="si-1"><div class="sn">1</div> Resume</div>
    <div class="step-tab"        id="si-2"><div class="sn">2</div> Background</div>
    <div class="step-tab"        id="si-3"><div class="sn">3</div> Goals</div>
    <div class="step-tab"        id="si-4"><div class="sn">4</div> Analyze</div>
  </div>

  <div class="alert" id="alert-box"></div>

  <!-- Step 1 -->
  <div class="card active" id="card-1">
    <div class="ch">
      <h2>Upload your resume</h2>
      <p>PDF format, text-based (not scanned image). Max 5 MB.</p>
    </div>
    <div class="upload-zone" id="upload-zone">
      <input type="file" id="resume-file" accept=".pdf"/>
      <div class="u-icon">üìÑ</div>
      <h3>Drop your PDF here</h3>
      <p>or click to browse files</p>
    </div>
    <div class="file-ok" id="file-ok">
      <span style="font-size:18px;color:var(--green)">‚úì</span>
      <div>
        <div class="file-ok-name" id="fname"></div>
        <div class="file-ok-size" id="fsize"></div>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn-next" onclick="go(2)">Next ‚Üí</button>
    </div>
  </div>

  <!-- Step 2 -->
  <div class="card" id="card-2">
    <div class="ch">
      <h2>Your background</h2>
      <p>Education and experience details help improve accuracy.</p>
    </div>
    <div class="two-col">
      <div class="field">
        <label>Education branch</label>
        <select id="education_branch">
          <option value="">Select branch</option>
          <option value="Computer Science">Computer Science</option>
          <option value="Information Technology">Information Technology</option>
          <option value="Electronics and Communication">Electronics & Communication</option>
          <option value="Electrical Engineering">Electrical Engineering</option>
          <option value="Mathematics">Mathematics</option>
          <option value="Mechanical Engineering">Mechanical Engineering</option>
          <option value="Business Administration">Business Administration</option>
          <option value="Other">Other</option>
        </select>
      </div>
      <div class="field">
        <label>Year of study</label>
        <select id="year_of_study">
          <option value="">Select year</option>
          <option value="1st year">1st Year</option>
          <option value="2nd year">2nd Year</option>
          <option value="3rd year">3rd Year</option>
          <option value="4th year">4th Year</option>
          <option value="final year">Final Year</option>
        </select>
      </div>
    </div>
    <div class="field">
      <label>Skills you know <span style="font-weight:400;color:var(--ink3)">(comma separated)</span></label>
      <input type="text" id="known_skills" placeholder="e.g. Python, SQL, React, Git, Flutter ‚Ä¶"/>
    </div>
    <div class="field">
      <label>Projects you've built</label>
      <textarea id="projects_done" placeholder="e.g. Movie recommendation system, food delivery app, portfolio website ‚Ä¶"></textarea>
    </div>
    <div class="field">
      <label>Internship experience?</label>
      <div class="pills" id="intern-pills">
        <button class="pill on" data-val="false" onclick="pick('intern-pills',this)">No internship yet</button>
        <button class="pill"    data-val="true"  onclick="pick('intern-pills',this)">Yes, I've interned</button>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn-back" onclick="go(1)">‚Üê Back</button>
      <button class="btn-next" onclick="go(3)">Next ‚Üí</button>
    </div>
  </div>

  <!-- Step 3 -->
  <div class="card" id="card-3">
    <div class="ch">
      <h2>Goals & interests</h2>
      <p>The more specific you are, the better the guidance.</p>
    </div>
    <div class="field">
      <label>What interests you most?</label>
      <textarea id="interests" placeholder="e.g. I enjoy building mobile apps, solving data problems, working on ML projects ‚Ä¶"></textarea>
    </div>
    <div class="field">
      <label>What is your career goal?</label>
      <input type="text" id="career_goal" placeholder="e.g. I want to work as a Data Scientist at a product company"/>
    </div>
    <div class="field">
      <label>What do you feel you need to improve?</label>
      <input type="text" id="self_weakness" placeholder="e.g. weak in system design, statistics, DSA ‚Ä¶"/>
    </div>
    <div class="field">
      <label>Preferred work type</label>
      <div class="pills" id="work-pills">
        <button class="pill on" data-val="startup"         onclick="pick('work-pills',this)">Startup</button>
        <button class="pill"    data-val="product company" onclick="pick('work-pills',this)">Product company</button>
        <button class="pill"    data-val="service company" onclick="pick('work-pills',this)">Service company</button>
        <button class="pill"    data-val="remote"          onclick="pick('work-pills',this)">Remote</button>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn-back"   onclick="go(2)">‚Üê Back</button>
      <button class="btn-submit" onclick="submit()">Analyze my profile ‚Üí</button>
    </div>
  </div>
</div>

<!-- LOADING -->
<div class="loader" id="loader">
  <div class="loader-ring"></div>
  <div class="loader-msg">Analyzing your profile‚Ä¶</div>
  <div class="loader-steps">
    <div class="loader-step" style="animation-delay:0s">Extracting resume content</div>
    <div class="loader-step" style="animation-delay:1.1s">Parsing skills and education</div>
    <div class="loader-step" style="animation-delay:2.2s">Running career classifier</div>
    <div class="loader-step" style="animation-delay:3.3s">Mapping skill gaps</div>
    <div class="loader-step" style="animation-delay:4.4s">Building your report</div>
  </div>
</div>

<!-- RESULTS -->
<div id="results">
  <div class="rw">
    <div class="r-top">
      <div class="rl">Analysis complete</div>
      <h2>Your career <em>guidance report</em></h2>
    </div>

    <div class="primary-box">
      <div class="pl">Top career match</div>
      <div class="pn" id="r-career">‚Äî</div>
      <div class="conf-row">
        <div class="conf-bar"><div class="conf-fill" id="r-fill"></div></div>
        <div class="conf-pct" id="r-pct">‚Äî</div>
      </div>
    </div>

    <div class="summary-box" id="r-summary">‚Äî</div>

    <div class="sl">Also consider</div>
    <div class="alt-row" id="r-alts"></div>

    <div class="sl">Skill breakdown</div>
    <div class="skill-grid">
      <div class="skill-box">
        <div class="sb-title"><span class="dot dg"></span>Skills you have</div>
        <div class="tl" id="r-have"></div>
      </div>
      <div class="skill-box">
        <div class="sb-title"><span class="dot dr"></span>Skill gaps</div>
        <div class="tl" id="r-gaps"></div>
      </div>
      <div class="skill-box">
        <div class="sb-title"><span class="dot dp"></span>Good to have</div>
        <div class="tl" id="r-gth"></div>
      </div>
      <div class="skill-box">
        <div class="sb-title"><span class="dot dy"></span>Improve on</div>
        <div class="tl" id="r-improve"></div>
      </div>
    </div>

    <div class="sl">Recommended courses</div>
    <div class="courses-box" id="r-courses"></div>

    <div id="r-bonus-wrap" style="display:none">
      <div class="sl">Courses for growth</div>
      <div class="courses-box" id="r-bonus"></div>
    </div>

    <div class="sl">Detected from resume</div>
    <div class="profile-box" id="r-profile"></div>

    <div class="sl">All skills detected</div>
    <div class="ds-box"><div class="tl" id="r-skills"></div></div>

    <button class="restart" onclick="restart()">‚Ü∫ Start a new analysis</button>
  </div>
</div>

<script>
  let step = 1, rf = null;

  const fi = document.getElementById('resume-file');
  const uz = document.getElementById('upload-zone');
  fi.addEventListener('change', e => { if(e.target.files[0]) attach(e.target.files[0]); });
  uz.addEventListener('dragover',  e => { e.preventDefault(); uz.classList.add('over'); });
  uz.addEventListener('dragleave', () => uz.classList.remove('over'));
  uz.addEventListener('drop', e => {
    e.preventDefault(); uz.classList.remove('over');
    const f = e.dataTransfer.files[0];
    if(f && f.type==='application/pdf') attach(f);
  });
  function attach(f) {
    rf = f;
    document.getElementById('fname').textContent = f.name;
    document.getElementById('fsize').textContent = (f.size/1024).toFixed(1)+' KB';
    document.getElementById('file-ok').classList.add('show');
  }

  function pick(gid, btn) {
    document.querySelectorAll(`#${gid} .pill`).forEach(b=>b.classList.remove('on'));
    btn.classList.add('on');
  }
  function pv(gid) { const b=document.querySelector(`#${gid} .pill.on`); return b?b.dataset.val:''; }

  function go(n) {
    clr();
    if(n===2 && !rf) { err('Please upload your resume first.'); return; }
    document.getElementById(`card-${step}`).classList.remove('active');
    const prev = document.getElementById(`si-${step}`);
    prev.classList.remove('active'); prev.classList.add('done');
    step = n;
    document.getElementById(`card-${step}`).classList.add('active');
    const curr = document.getElementById(`si-${step}`);
    curr.classList.remove('done'); curr.classList.add('active');
    document.getElementById('fs').scrollIntoView({behavior:'smooth',block:'start'});
  }

  function err(m) { const e=document.getElementById('alert-box'); e.textContent=m; e.classList.add('show'); }
  function clr()  { document.getElementById('alert-box').classList.remove('show'); }

  async function submit() {
    clr();
    if(!document.getElementById('interests').value.trim())   { err('Please fill in your interests.'); return; }
    if(!document.getElementById('career_goal').value.trim()) { err('Please fill in your career goal.'); return; }
    const fd = new FormData();
    fd.append('resume',           rf);
    fd.append('interests',        document.getElementById('interests').value.trim());
    fd.append('known_skills',     document.getElementById('known_skills').value.trim());
    fd.append('career_goal',      document.getElementById('career_goal').value.trim());
    fd.append('projects_done',    document.getElementById('projects_done').value.trim());
    fd.append('education_branch', document.getElementById('education_branch').value);
    fd.append('year_of_study',    document.getElementById('year_of_study').value);
    fd.append('has_internship',   pv('intern-pills'));
    fd.append('self_weakness',    document.getElementById('self_weakness').value.trim());
    fd.append('preferred_work',   pv('work-pills'));
    document.getElementById('loader').classList.add('show');
    try {
      const res  = await fetch('/api/analyze', {method:'POST', body:fd});
      const data = await res.json();
      document.getElementById('loader').classList.remove('show');
      if(data.error) { err('Error: '+data.error); return; }
      render(data);
    } catch(e) {
      document.getElementById('loader').classList.remove('show');
      err('Something went wrong. Make sure the Flask server is running.');
    }
  }

  function render(data) {
    document.querySelector('.main').style.display   = 'none';
    document.querySelector('.hero').style.display   = 'none';
    document.querySelector('.divider').style.display = 'none';
    const g=data.guidance, p=g.primary_career, sp=data.student_profile;
    document.getElementById('r-career').textContent = p.name;
    document.getElementById('r-pct').textContent    = p.confidence_percent+'%';
    setTimeout(()=>{ document.getElementById('r-fill').style.width = p.confidence_percent+'%'; }, 300);
    document.getElementById('r-summary').textContent = g.summary;

    document.getElementById('r-alts').innerHTML = g.top_career_recommendations.slice(1).map(c=>`
      <div class="alt-card"><div class="alt-name">${c.career}</div><div class="alt-pct">${c.confidence_percent}%</div></div>`).join('');

    tags('r-have',   p.skills_you_have,    'tg');
    tags('r-gaps',   p.skill_gaps,         'tr');
    tags('r-gth',    p.good_to_have_skills,'tp');
    tags('r-improve',p.improvement_areas,  'ty');

    crss('r-courses', p.recommended_courses);
    if(p.bonus_courses_for_growth && p.bonus_courses_for_growth.length) {
      document.getElementById('r-bonus-wrap').style.display='block';
      crss('r-bonus', p.bonus_courses_for_growth);
    }

    document.getElementById('r-profile').innerHTML = `
      <div><div class="pi-l">Degree</div><div class="pi-v">${sp.education_degree||'‚Äî'}</div></div>
      <div><div class="pi-l">Branch</div><div class="pi-v">${sp.education_branch||'‚Äî'}</div></div>
      <div><div class="pi-l">CGPA</div><div class="pi-v">${sp.cgpa||'Not found'}</div></div>
      <div><div class="pi-l">Internship</div><div class="pi-v">${sp.has_internship?'Yes':'No'}</div></div>`;

    const se = document.getElementById('r-skills');
    if(sp.skills_detected && sp.skills_detected.length)
      se.innerHTML = sp.skills_detected.map(s=>`<span class="tag tp">${s}</span>`).join('');
    else se.innerHTML = '<span class="te">No skills detected from resume text</span>';

    document.getElementById('results').classList.add('show');
    window.scrollTo({top:0,behavior:'smooth'});
  }

  function tags(id,list,cls) {
    const el=document.getElementById(id);
    el.innerHTML = (list&&list.length) ? list.map(s=>`<span class="tag ${cls}">${s}</span>`).join('') : '<span class="te">None</span>';
  }
  function crss(id,list) {
    const el=document.getElementById(id);
    if(!list||!list.length) { el.innerHTML='<div style="padding:16px 20px;font-size:13px;color:var(--ink3)">You\'re well equipped ‚Äî no courses needed here.</div>'; return; }
    el.innerHTML = list.map((c,i)=>`
      <div class="course-row">
        <div class="cn">${i+1}</div>
        <div class="ci">
          <div class="ci-pl">${c.platform}</div>
          <div class="ci-name">${c.course}</div>
          <div class="ci-for">Fills gap: ${c.skill}</div>
        </div>
        <a href="${c.url}" target="_blank" class="cl" title="Open course">‚Üó</a>
      </div>`).join('');
  }

  function restart() {
    document.getElementById('results').classList.remove('show');
    document.querySelector('.main').style.display    = 'block';
    document.querySelector('.hero').style.display    = 'block';
    document.querySelector('.divider').style.display = 'block';
    step=1; rf=null;
    for(let i=1;i<=4;i++){
      document.getElementById(`si-${i}`).classList.remove('active','done');
      const c=document.getElementById(`card-${i}`); if(c) c.classList.remove('active');
    }
    document.getElementById('si-1').classList.add('active');
    document.getElementById('card-1').classList.add('active');
    document.getElementById('file-ok').classList.remove('show');
    document.getElementById('resume-file').value='';
    window.scrollTo({top:0,behavior:'smooth'});
  }
</script>
</body>
</html>